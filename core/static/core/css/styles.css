/*
 * Core styles for InsightZen.
 *
 * A charcoal-led dark theme uses muted cyan accents to highlight
 * interactive elements.  Shared CSS custom properties drive colours,
 * spacing, and typography to keep the interface consistent and easy to
 * extend.
 */

:root {
    /* Neutral charcoal palette with muted cyan accents */
    --color-bg: #111418;
    --color-bg-subtle: #161b21;
    --color-surface: #1d232b;
    --color-surface-elevated: #252c36;
    --color-border: #2f3742;
    --color-border-soft: rgba(47, 55, 66, 0.6);
    --color-shadow-soft: 0 10px 30px rgba(5, 7, 10, 0.3);
    --color-text: #e3e6eb;
    --color-text-muted: #8a9099;
    --color-accent: #4cb5c3;
    --color-accent-strong: #5ccbd8;
    --color-accent-soft: rgba(76, 181, 195, 0.16);
    --color-danger: #d46b70;
    --color-danger-strong: #e17f85;

    --font-family-base: 'Poppins', sans-serif;
    --font-size-base: 1rem;
    --line-height-base: 1.6;
    --font-size-sm: 0.875rem;
    --font-size-xs: 0.75rem;
    --font-size-h1: 2rem;
    --font-size-h2: 1.625rem;
    --font-size-h3: 1.375rem;
}

body {
    margin: 0;
    background: var(--color-bg);
    color: var(--color-text);
    font-family: var(--font-family-base);
    font-size: var(--font-size-base);
    line-height: var(--line-height-base);
    transition: background-color 0.3s ease, color 0.3s ease;
}

h1, h2, h3, h4, h5, h6 {
    margin: 0 0 0.75rem;
    font-weight: 600;
    line-height: 1.3;
    color: var(--color-text);
}

h1 {
    font-size: var(--font-size-h1);
}

h2 {
    font-size: var(--font-size-h2);
}

h3 {
    font-size: var(--font-size-h3);
}

body.rtl {
    direction: rtl;
    font-family: 'Vazirmatn', sans-serif;
}

/* Layout containers */
.wrapper {
    display: flex;
    min-height: 100vh;
}

.sidebar {
    width: 240px;
    background: var(--color-surface);
    border-right: 1px solid var(--color-border);
    padding: calc(100vh / 6) 1rem 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    justify-content: flex-start;
    box-shadow: inset -1px 0 0 var(--color-border-soft);
    transition: transform 0.3s ease, background-color 0.3s ease, width 0.3s ease;
}

.sidebar .logo {
    margin-bottom: 2rem;
    text-align: center;
}

.sidebar .logo img {
    max-width: 140px;
}

.sidebar nav ul,
.sidebar nav details ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.sidebar nav li {
    margin: 0.25rem 0;
}

.sidebar nav a {
    color: var(--color-text);
    text-decoration: none;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.45rem 0.9rem;
    border-radius: 8px;
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;
}

.sidebar nav a svg,
.sidebar nav a i {
    min-width: 20px;
    text-align: center;
}

.sidebar nav a:hover {
    background: var(--color-accent-soft);
    color: var(--color-accent-strong);
    transform: translateX(2px);
}

.sidebar nav a.disabled {
    color: var(--color-text-muted);
    cursor: default;
    pointer-events: none;
    opacity: 0.5;
}

.sidebar nav summary {
    cursor: pointer;
    color: var(--color-text-muted);
    font-weight: 600;
    padding: 0.55rem 0.75rem;
    border-radius: 8px;
    transition: color 0.2s ease, background-color 0.2s ease;
    position: relative;
    padding-left: 2rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.sidebar nav details[open] summary {
    color: var(--color-accent-strong);
    background: var(--color-accent-soft);
}

/* Remove the default disclosure arrow */
.sidebar nav summary::-webkit-details-marker {
    display: none;
}

/* Custom indicator for collapsed and expanded groups */
.sidebar nav summary::before {
    content: '+';
    position: absolute;
    left: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    font-weight: bold;
    transition: transform 0.2s ease;
    color: var(--color-accent);
}
.sidebar nav details[open] > summary::before {
    content: '-';
    color: var(--color-accent-strong);
}

.main {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--color-bg-subtle);
}

.header {
    background: var(--color-bg-subtle);
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--color-border);
}

.language-toggle a {
    color: var(--color-accent);
    margin: 0 0.5rem;
    padding: 0.25rem 0.5rem;
    text-decoration: none;
    font-weight: 600;
    border-radius: 0.5rem;
    transition: color 0.2s ease, background-color 0.2s ease, box-shadow 0.2s ease;
}

.language-toggle a:hover,
.language-toggle a:focus-visible {
    color: var(--color-accent-strong);
    background: var(--color-accent-soft);
    text-decoration: none;
}

.language-toggle a:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--color-accent-soft);
}

.user-info {
    color: var(--color-accent-strong);
    font-weight: 600;
}

.page-content {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
}

/* Cards */
.card {
    background: var(--color-surface-elevated);
    padding: 1.5rem;
    border-radius: 12px;
    border: 1px solid var(--color-border);
    box-shadow: var(--color-shadow-soft);
    margin-bottom: 1.5rem;
}

.card h1 {
    margin-top: 0;
    color: var(--color-accent);
    font-weight: 700;
    font-size: var(--font-size-h2);
    letter-spacing: 0.3px;
}

/* Forms */
.form-control,
.form-select {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid var(--color-border);
    border-radius: 8px;
    background: var(--color-surface);
    color: var(--color-text);
    margin-bottom: 0.75rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-check-input {
    margin-right: 0.3rem;
}

.form-control:focus,
.form-select:focus {
    outline: none;
    border-color: var(--color-accent);
    box-shadow: 0 0 0 2px var(--color-accent-soft);
}

/* Buttons */
.btn {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    padding: 0.55rem 1.3rem;
    border: 1px solid transparent;
    border-radius: 999px;
    cursor: pointer;
    background: var(--color-accent);
    color: var(--color-bg);
    font-weight: 600;
    letter-spacing: 0.2px;
    transition: background-color 0.2s ease, transform 0.15s ease, box-shadow 0.2s ease, opacity 0.2s ease;
}

/* Highlight quota cells where assigned counts exceed targets */
.table-danger {
    background: rgba(212, 107, 112, 0.18);
    color: var(--color-danger-strong);
}

.btn:hover {
    background: var(--color-accent-strong);
    box-shadow: 0 12px 24px rgba(76, 181, 195, 0.25);
    transform: translateY(-1px);
}

.btn:active {
    transform: translateY(0);
    opacity: 0.85;
}

.btn-secondary {
    background: var(--color-surface);
    color: var(--color-accent);
    border-radius: 999px;
    border: 1px solid var(--color-accent);
}

.btn-secondary:hover {
    background: var(--color-accent-soft);
    color: var(--color-accent-strong);
}

/* Tables */
.table {
    width: 100%;
    border-collapse: collapse;
    table-layout: auto;
}

.table th,
.table td {
    padding: 0.65rem 0.75rem;
    border-bottom: 1px solid var(--color-border);
    text-align: left;
    font-size: var(--font-size-sm);
    vertical-align: top;
}

.table th {
    background: var(--color-surface);
    color: var(--color-accent);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    position: sticky;
    top: 0;
    z-index: 1;
    white-space: nowrap;
}

.table td {
    color: var(--color-text);
    white-space: normal;
    overflow-wrap: anywhere;
}

.table tr:nth-child(even) {
    background: rgba(255, 255, 255, 0.02);
}

.table tbody tr {
    transition: background-color 0.2s ease;
}

.table tr:hover {
    background: var(--color-accent-soft);
}

.table-responsive {
    width: 100%;
    overflow-x: auto;
    border: 1px solid var(--color-border);
    border-radius: 12px;
    background: var(--color-surface);
    box-shadow: inset 0 0 0 1px var(--color-border-soft);
    -webkit-overflow-scrolling: touch;
}

.table-responsive > table {
    min-width: 100%;
}

.table-responsive::-webkit-scrollbar {
    height: 8px;
}

.table-responsive::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 999px;
}

.table-responsive::-webkit-scrollbar-track {
    background: transparent;
}

@media (max-width: 768px) {
    .table th,
    .table td {
        padding: 0.5rem 0.6rem;
        font-size: var(--font-size-xs);
    }

    .table th {
        letter-spacing: 0.06em;
    }
}

/* Alerts */
.alert {
    padding: 0.8rem 1rem;
    border-radius: 4px;
    margin-bottom: 1rem;
}

.alert-success {
    background: #0d6640;
    color: #bdf2d6;
}

.alert-warning {
    background: #664d0d;
    color: #f2e0bd;
}

.alert-error,
.alert-danger {
    background: #66110d;
    color: #f2bdbd;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .sidebar {
        width: 200px;
        padding: 1.5rem 1rem;
    }
    .table th,
    .table td {
        padding: 0.4rem;
    }
}

/* Header brand and actions */
.brand {
    display: flex;
    align-items: center;
    gap: 0.6rem;
}

.logo {
    width: 32px;
    height: 32px;
    object-fit: contain;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.4));
}

.brand-name {
    font-size: var(--font-size-h2);
    font-weight: 700;
    color: var(--color-accent);
    letter-spacing: 0.1em;
    text-transform: uppercase;
}

.top-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.lang-btn {
    padding: 0.25rem 0.5rem;
    border-radius: 0.5rem;
    font-weight: 600;
    opacity: 0.85;
    transition: opacity 0.2s ease, background-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
    color: var(--color-accent);
    text-decoration: none;
}

.lang-btn:hover,
.lang-btn:focus-visible {
    opacity: 1;
    background: var(--color-accent-soft);
    color: var(--color-accent-strong);
    text-decoration: none;
}

.lang-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px var(--color-accent-soft);
}

.btn-outline {
    background: transparent;
    border: 1px solid var(--color-border);
    color: var(--color-text);
    border-radius: 999px;
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.15s ease;
}

.btn-outline:hover {
    background: var(--color-accent-soft);
    color: var(--color-accent-strong);
    transform: translateY(-1px);
}

.btn-sm {
    padding: 0.25rem 0.6rem;
    font-size: 0.85rem;
    border-radius: 999px;
}

.btn-danger {
    background: var(--color-danger);
    color: var(--color-bg);
    border-radius: 999px;
    border: 1px solid transparent;
}

.btn-danger:hover {
    background: var(--color-danger-strong);
}

/* Result batch card for coding/category outputs */
.result-batch {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 10px;
    margin-bottom: 1rem;
    padding: 0.75rem;
}

/* Dashboard grid for conjoint outputs */
/* Dashboard grid layout.
   The grid automatically adjusts the number of columns based on the available
   width. Cards will be at least 300px wide on large screens and stack on
   smaller screens. */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1rem;
    width: 100%;
}

/* Dashboard card styling */
.dashboard-card {
    background: var(--color-surface-elevated);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    box-shadow: var(--color-shadow-soft);
    padding: 1rem;
    overflow: hidden;
}
.dashboard-card h3 {
    margin-top: 0;
    margin-bottom: 0.5rem;
    color: var(--color-accent);
    font-size: var(--font-size-h3);
    font-weight: 600;
}

/* Constrain tables inside dashboard cards to prevent overflow. */
.dashboard-card .table-responsive {
    max-height: 220px;
    overflow-y: auto;
}

/* Adjust tables inside dashboard cards */
.dashboard-card .table {
    min-width: 100%;
}

/* Sidebar collapsed state */
body.sidebar-collapsed .sidebar {
    width: 70px;
    transform: none;
    padding: 1.5rem 0.75rem;
}

body.sidebar-collapsed .sidebar nav span.label {
    display: none;
}

body.sidebar-collapsed .sidebar nav a,
body.sidebar-collapsed .sidebar nav summary {
    justify-content: center;
    gap: 0.5rem;
    padding-left: 0.75rem;
    padding-right: 0.75rem;
}

body.sidebar-collapsed .sidebar nav summary::before {
    left: 50%;
    transform: translate(-50%, -50%);
}

body.sidebar-collapsed .sidebar nav details[open] > summary::before {
    transform: translate(-50%, -50%);
}

/* Menu toggle button */
.menu-toggle {
    background: transparent;
    border: none;
    color: var(--color-text);
    font-size: 1.5rem;
    margin-right: 1rem;
    cursor: pointer;
    transition: color 0.2s ease, transform 0.15s ease;
}

.menu-toggle:hover {
    color: var(--color-accent);
    transform: scale(1.05);
}

/* Reduce motion preference */
@media (prefers-reduced-motion: reduce) {
    * {
        transition: none !important;
        animation-duration: 0.001ms !important;
    }
}